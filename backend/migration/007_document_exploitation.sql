-- Migration 007: Exploitation de Documents Bruts
-- Support pour le texte intégral et l'import de masse

-- 1. Ajout du contenu brut au document pour la recherche plein texte
ALTER TABLE legal_documents ADD COLUMN IF NOT EXISTS full_text TEXT;

-- 2. Ajout d'une colonne pour le chemin du fichier (PDF/Doc)
ALTER TABLE legal_documents ADD COLUMN IF NOT EXISTS file_path TEXT;

-- 3. Index de recherche plein texte (Basic GIN index pour le contenu)
-- Note: Dans une version avancée on utiliserait tsvector
CREATE INDEX IF NOT EXISTS idx_legal_articles_content ON legal_framework USING GIN (to_tsvector('french', content));
CREATE INDEX IF NOT EXISTS idx_legal_docs_full_text ON legal_documents USING GIN (to_tsvector('french', full_text));
